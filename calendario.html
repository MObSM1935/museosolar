<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario Astronómico - Observatorio de Física Cósmica de San Miguel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --space-blue: #0b0d17;
            --cosmic-purple: #1e1a3e;
            --starlight-yellow: #f6ad55;
            --nebula-pink: #d53f8c;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--space-blue);
            color: #e2e8f0;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(214, 188, 250, 0.05) 0%, rgba(214, 188, 250, 0) 40%),
                radial-gradient(circle at 90% 80%, rgba(246, 173, 85, 0.05) 0%, rgba(246, 173, 85, 0) 40%),
                radial-gradient(circle at 50% 50%, rgba(100, 100, 220, 0.03) 0%, rgba(100, 100, 220, 0) 30%);
        }
        
        .navbar-glass {
            background-color: rgba(11, 13, 23, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(246, 173, 85, 0.2);
        }
        
        .hero-section-calendar {
            background: linear-gradient(to bottom, rgba(11, 13, 23, 0.85), rgba(30, 26, 62, 0.95)), url('https://images.unsplash.com/photo-1462331940025-496dfbfc7564?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover no-repeat;
            min-height: 50vh; /* Reduced height for non-main page hero */
        }

        .card {
            background-color: rgba(30, 26, 62, 0.7);
            border: 1px solid rgba(109, 40, 217, 0.3);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(214, 188, 250, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--starlight-yellow), var(--nebula-pink));
            color: #1a202c;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(246, 173, 85, 0.4);
        }
        
        .btn-primary::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 20px;
            height: 200%;
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(25deg);
            transition: all 0.5s;
        }
        
        .btn-primary:hover::after {
            left: 120%;
        }
        
        .section-title {
            color: var(--starlight-yellow);
            position: relative;
            display: inline-block;
            padding-bottom: 10px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, var(--starlight-yellow), var(--nebula-pink));
            border-radius: 3px;
        }
        
        .star-decoration {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 5s infinite;
            z-index: 0; 
        }
        
        @keyframes twinkle {
            0% { opacity: 0.2; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
            100% { opacity: 0.2; transform: scale(0.8); }
        }

        /* Calendar specific styles */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, minmax(0, 1fr));
            gap: 4px; /* Tailwind's gap-1 */
        }
        .calendar-day-header {
            text-align: center;
            color: var(--starlight-yellow);
            font-weight: 600;
            padding: 0.5rem; /* Tailwind's p-2 */
            font-size: 0.875rem; /* Tailwind's text-sm */
        }
        .calendar-day-cell {
            background-color: rgba(30, 26, 62, 0.4); /* --cosmic-purple with opacity */
            border: 1px solid rgba(109, 40, 217, 0.2); /* Subtle border */
            border-radius: 8px; /* Tailwind's rounded-lg */
            min-height: 120px; /* Minimum height for day cells */
            padding: 0.5rem; /* Tailwind's p-2 */
            transition: all 0.3s ease;
            font-size: 0.875rem; /* text-sm */
            overflow-y: auto; /* Scroll for many events */
            position: relative;
        }
        .calendar-day-cell:hover {
            background-color: rgba(109, 40, 217, 0.2); /* Lighter on hover */
            transform: scale(1.02);
        }
        .calendar-day-number {
            font-weight: 600;
            margin-bottom: 0.25rem; /* Tailwind's mb-1 */
        }
        .day-other-month .calendar-day-number {
            color: #6b7280; /* Tailwind's gray-500 */
            opacity: 0.6;
        }
        .day-today .calendar-day-number {
            background-color: var(--starlight-yellow);
            color: var(--space-blue);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 2px;
        }
        .calendar-event {
            background-color: rgba(246, 173, 85, 0.1); /* --starlight-yellow with opacity */
            color: var(--starlight-yellow);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem; /* text-xs */
            margin-bottom: 0.25rem;
            cursor: pointer;
            transition: background-color 0.2s ease;
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .calendar-event:hover {
            background-color: rgba(246, 173, 85, 0.3);
        }
        .event-type-observacion { border-left: 3px solid #34d399; } /* green-400 */
        .event-type-charla { border-left: 3px solid #60a5fa; } /* blue-400 */
        .event-type-taller { border-left: 3px solid #fbbf24; } /* amber-400 */
        .event-type-curso { border-left: 3px solid #c084fc; } /* purple-400 */
        .event-type-especial { border-left: 3px solid #f472b6; } /* pink-400 */
        .event-type-premium { border-left: 3px solid var(--nebula-pink); }
        .event-type-global { border-left: 3px solid #a3a3a3; } /* neutral-400 */
        
        .month-navigation button {
            background-color: rgba(30, 26, 62, 0.8);
            border: 1px solid rgba(109, 40, 217, 0.3);
        }
        .month-navigation button:hover {
            background-color: var(--starlight-yellow);
            color: var(--space-blue);
        }
        #event-tooltip {
            position: absolute;
            background-color: var(--cosmic-purple);
            border: 1px solid var(--starlight-yellow);
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            z-index: 100;
            width: 300px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            font-size: 0.875rem;
            pointer-events: none; /* Important for mouseout to work correctly on the day cell */
        }
        #event-tooltip h4 {
            color: var(--starlight-yellow);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        #event-tooltip p {
            margin-bottom: 0.25rem;
            line-height: 1.4;
        }

        /* Ensure consistent modal styles if any are added to this page */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(11, 13, 23, 0.9); display: flex;
            align-items: center; justify-content: center; z-index: 1000;
            backdrop-filter: blur(5px); padding: 1rem;
        }
        .modal-content {
            background-color: var(--cosmic-purple); animation: fadeInModal 0.3s ease-out;
            max-height: 90vh; overflow-y: auto;
        }
        @keyframes fadeInModal {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>
    <div class="star-decoration" style="top: 5%; left: 5%; width: 1px; height: 1px; animation-delay: 0.5s;"></div>
    <div class="star-decoration" style="top: 15%; left: 10%; width: 2px; height: 2px;"></div>
    <div class="star-decoration" style="top: 10%; left: 30%; width: 1px; height: 1px; animation-delay: 1.5s;"></div>
    <div class="star-decoration" style="top: 25%; left: 85%; width: 3px; height: 3px; animation-delay: 1s;"></div>
    <div class="star-decoration" style="top: 30%; left: 60%; width: 2px; height: 2px; animation-delay: 2.5s;"></div>
    <div class="star-decoration" style="top: 40%; left: 45%; width: 2px; height: 2px; animation-delay: 2s;"></div>
    <div class="star-decoration" style="top: 50%; left: 90%; width: 1px; height: 1px; animation-delay: 3.5s;"></div>
    <div class="star-decoration" style="top: 60%; left: 15%; width: 2px; height: 2px; animation-delay: 0.2s;"></div>
    <div class="star-decoration" style="top: 70%; left: 25%; width: 3px; height: 3px; animation-delay: 3s;"></div>
    <div class="star-decoration" style="top: 75%; left: 75%; width: 1px; height: 1px; animation-delay: 4.5s;"></div>
    <div class="star-decoration" style="top: 85%; left: 65%; width: 2px; height: 2px; animation-delay: 4s;"></div>
    <div class="star-decoration" style="top: 90%; left: 5%; width: 3px; height: 3px; animation-delay: 0.8s;"></div>
    <div class="star-decoration" style="top: 95%; left: 50%; width: 1px; height: 1px; animation-delay: 2.2s;"></div>
    <div class="star-decoration" style="top: 5%; left: 70%; width: 2px; height: 2px; animation-delay: 1.8s;"></div>
    <div class="star-decoration" style="top: 65%; left: 95%; width: 2px; height: 2px; animation-delay: 3.2s;"></div>

    <nav class="navbar-glass sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-white">
                <i class="fas fa-satellite mr-2 text-yellow-400"></i>Observatorio San Miguel
            </a>
            <div class="hidden md:flex space-x-4 items-center">
                <a href="index.html#eventos" class="text-gray-300 hover:text-yellow-400 transition duration-300">Eventos</a>
                <a href="index.html#ubicacion" class="text-gray-300 hover:text-yellow-400 transition duration-300">Ubicación</a>
                <a href="index.html#cursos" class="text-gray-300 hover:text-yellow-400 transition duration-300">Cursos</a>
                <a href="#" class="text-yellow-400 font-semibold transition duration-300">Calendario</a> <a href="index.html#comunidad" class="text-gray-300 hover:text-yellow-400 transition duration-300">Foro</a>
                <a href="index.html#ia-stro" class="text-gray-300 hover:text-yellow-400 transition duration-300">IA.STRO</a>
                <a href="index.html#descargas" class="text-gray-300 hover:text-yellow-400 transition duration-300">Descargas</a>
                <a href="index.html#contacto" class="text-gray-300 hover:text-yellow-400 transition duration-300">Contacto</a>
                <a href="index.html#premium" class="btn-primary px-4 py-2 rounded-full font-semibold">
                    <i class="fas fa-star mr-1"></i>Premium
                </a>
            </div>
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-300 focus:outline-none">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="index.html#eventos" class="block text-gray-300 hover:text-yellow-400 transition duration-300">Eventos</a>
            <a href="index.html#ubicacion" class="block text-gray-300 hover:text-yellow-400 transition duration-300">Ubicación</a>
            <a href="index.html#cursos" class="block text-gray-300 hover:text-yellow-400 transition duration-300">Cursos</a>
            <a href="#" class="block text-yellow-400 font-semibold transition duration-300">Calendario</a>
            <a href="index.html#comunidad" class="block text-gray-300 hover:text-yellow-400 transition duration-300">Foro</a>
            <a href="index.html#ia-stro" class="block text-gray-300 hover:text-yellow-400 transition duration-300">IA.STRO</a>
            <a href="index.html#descargas" class="block text-gray-300 hover:text-yellow-400 transition duration-300">Descargas</a>
            <a href="index.html#contacto" class="block text-gray-300 hover:text-yellow-400 transition duration-300">Contacto</a>
            <a href="index.html#premium" class="block btn-primary px-4 py-2 rounded-full font-semibold text-center mt-2">
                <i class="fas fa-star mr-1"></i>Premium
            </a>
        </div>
    </nav>

    <header class="hero-section-calendar flex items-center justify-center text-center">
        <div class="container mx-auto px-6 relative z-10">
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4 leading-tight">
                Calendario Astronómico <span class="text-yellow-400">2025</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-200 max-w-2xl mx-auto">
                Explora todos nuestros eventos, fenómenos celestes y actividades programadas. No te pierdas ningún espectáculo cósmico.
            </p>
        </div>
    </header>

    <main class="container mx-auto px-2 sm:px-6 py-12">
        <section id="calendar-controls" class="mb-10 p-6 card">
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
                <div class="month-navigation flex items-center space-x-2">
                    <button id="prev-year-btn" class="px-3 py-2 rounded-lg text-sm" title="Año Anterior"><i class="fas fa-angle-double-left"></i></button>
                    <button id="prev-month-btn" class="px-3 py-2 rounded-lg text-sm" title="Mes Anterior"><i class="fas fa-angle-left"></i></button>
                    <h2 id="current-month-year" class="text-2xl font-bold text-white w-48 text-center">Enero 2025</h2>
                    <button id="next-month-btn" class="px-3 py-2 rounded-lg text-sm" title="Mes Siguiente"><i class="fas fa-angle-right"></i></button>
                    <button id="next-year-btn" class="px-3 py-2 rounded-lg text-sm" title="Año Siguiente"><i class="fas fa-angle-double-right"></i></button>
                </div>
                <div class="flex items-center space-x-2">
                    <label for="event-filter" class="text-sm text-gray-300">Filtrar por tipo:</label>
                    <select id="event-filter" class="bg-gray-800 border border-gray-700 text-white text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 p-2">
                        <option value="all">Todos</option>
                        <option value="observacion">Observación</option>
                        <option value="charla">Charla</option>
                        <option value="taller">Taller</option>
                        <option value="curso">Curso</option>
                        <option value="especial">Especial</option>
                        <option value="premium">Premium</option>
                        <option value="global">Global</option>
                    </select>
                </div>
            </div>
        </section>
        
        <section id="calendar-view" class="mb-12">
            <div class="calendar-grid">
                <div class="calendar-day-header">Dom</div>
                <div class="calendar-day-header">Lun</div>
                <div class="calendar-day-header">Mar</div>
                <div class="calendar-day-header">Mié</div>
                <div class="calendar-day-header">Jue</div>
                <div class="calendar-day-header">Vie</div>
                <div class="calendar-day-header">Sáb</div>
            </div>
            <div id="calendar-days-container" class="calendar-grid mt-1">
                </div>
        </section>

        <section id="event-list-summary" class="mt-12">
            <h2 class="text-2xl font-bold text-center mb-8 section-title">Resumen de Eventos del Mes</h2>
            <div id="monthly-event-summary" class="space-y-4 max-w-3xl mx-auto">
                <p class="text-center text-gray-400">Selecciona un mes para ver el resumen de eventos.</p>
            </div>
        </section>
    </main>

    <div id="event-tooltip" class="hidden">
        </div>

    <footer class="py-12 border-t border-gray-800">
        <div class="container mx-auto px-6 text-center text-gray-400">
            <div class="mb-6">
                 <a href="index.html" class="text-xl font-bold text-white hover:text-yellow-400 transition">
                    <i class="fas fa-satellite mr-2 text-yellow-400"></i>Observatorio de Física Cósmica de San Miguel
                </a>
            </div>
            <div class="mb-6 space-x-6">
                <a href="index.html#eventos" class="hover:text-yellow-400">Eventos</a>
                <a href="index.html#cursos" class="hover:text-yellow-400">Cursos</a>
                <a href="index.html#comunidad" class="hover:text-yellow-400">Comunidad</a>
                <a href="index.html#premium" class="hover:text-yellow-400">Premium</a>
                <a href="index.html#contacto" class="hover:text-yellow-400">Contacto</a>
                <a href="#" class="hover:text-yellow-400">Política de Privacidad</a>
            </div>
            <div class="mb-6 flex justify-center space-x-6">
                <a href="#" aria-label="Facebook" class="text-gray-400 hover:text-yellow-400 transition duration-300"><i class="fab fa-facebook-f fa-lg"></i></a>
                <a href="#" aria-label="Instagram" class="text-gray-400 hover:text-yellow-400 transition duration-300"><i class="fab fa-instagram fa-lg"></i></a>
                <a href="#" aria-label="Twitter" class="text-gray-400 hover:text-yellow-400 transition duration-300"><i class="fab fa-twitter fa-lg"></i></a>
                <a href="#" aria-label="YouTube" class="text-gray-400 hover:text-yellow-400 transition duration-300"><i class="fab fa-youtube fa-lg"></i></a>
            </div>
            <p class="text-sm">© <span id="currentYear"></span> Observatorio de Física Cósmica de San Miguel. Todos los derechos reservados.</p>
            <p class="text-xs mt-2">Diseñado con <i class="fas fa-heart text-red-500"></i> por la IA y los Amantes del Cosmos.</p>
        </div>
    </footer>

    <script>
        // Menú móvil
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Año actual en footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // --- Lógica del Calendario ---
        const currentMonthYearElem = document.getElementById('current-month-year');
        const calendarDaysContainer = document.getElementById('calendar-days-container');
        const prevMonthBtn = document.getElementById('prev-month-btn');
        const nextMonthBtn = document.getElementById('next-month-btn');
        const prevYearBtn = document.getElementById('prev-year-btn');
        const nextYearBtn = document.getElementById('next-year-btn');
        const eventFilter = document.getElementById('event-filter');
        const monthlyEventSummaryElem = document.getElementById('monthly-event-summary');
        const eventTooltip = document.getElementById('event-tooltip');

        let currentDate = new Date(2025, 0, 1); // Iniciar en Enero 2025

        // Datos de eventos (ficticios y algunos reales para 2025)
        // Formato: 'YYYY-MM-DD': [{ title: 'Evento', time: 'HH:MM', type: '...', description: '...', location: '...' }]
        const eventsData = {
            '2025-01-01': [{ title: 'Año Nuevo Cósmico', time: 'Todo el día', type: 'especial', description: 'Celebración especial en el observatorio (actividad diurna).', location: 'Observatorio' }],
            '2025-01-03': [{ title: 'Lluvia de Cuadrántidas (Pico)', time: '02:00', type: 'global', description: 'Pico de la lluvia de meteoros Cuadrántidas. Visible en el hemisferio norte principalmente.', location: 'Cielo Nocturno' }],
            '2025-01-06': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Ideal para observación de cielo profundo.', location: 'Cielo Nocturno' }],
            '2025-01-10': [{ title: 'Charla: El Futuro de la Exploración Espacial', time: '19:00', type: 'charla', description: 'Conferencia por Dra. Aurora boreal sobre misiones futuras.', location: 'Auditorio Principal' }],
            '2025-01-15': [{ title: 'Taller: Introducción al Manejo de Telescopios', time: '18:00', type: 'taller', description: 'Aprende los conceptos básicos para usar un telescopio. Dirigido por Nicolás Balbi.', location: 'Aula Cosmos' }],
            '2025-01-21': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna del Lobo. Observación lunar especial.', location: 'Terraza Observatorio' }],
            '2025-01-25': [{ title: 'Observación de Júpiter y sus Lunas', time: '20:30', type: 'observacion', description: 'Observación guiada de Júpiter y las lunas galileanas.', location: 'Plataforma Principal' }],
            '2025-01-28': [{ title: 'Inicio Curso: Introducción a la Astrofísica (Módulo 1)', time: '18:30', type: 'curso', description: 'Primer módulo del curso impartido por Bella Vista al Cosmos.', location: 'Online / Aula Magna' }],
            
            '2025-02-04': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Noche oscura para observar galaxias.', location: 'Cielo Nocturno' }],
            '2025-02-08': [{ title: 'Taller de Astrofotografía para Principiantes', time: '17:00', type: 'taller', description: 'Con Mayra Schwarzschild. Cupos limitados.', location: 'Aula Cosmos Kids' }],
            '2025-02-12': [{ title: 'Charla: Supernovas y la Creación de Elementos', time: '19:30', type: 'charla', description: 'Descubre el ciclo de vida estelar y las explosiones cósmicas.', location: 'Auditorio Principal' }],
            '2025-02-19': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna de Nieve. Observación guiada.', location: 'Terraza Observatorio' }],
            '2025-02-22': [{ title: 'Observación de la Nebulosa de Orión', time: '21:00', type: 'observacion', description: 'Una de las nebulosas más brillantes y fáciles de observar.', location: 'Plataforma Principal' }],
            '2025-02-26': [{ title: 'Evento Premium: Noche Exclusiva con el Gran Telescopio', time: '20:00', type: 'premium', description: 'Solo para miembros Cosmos Dorado. Acceso al telescopio principal.', location: 'Cúpula Principal' }],

            '2025-03-06': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Oportunidad para astrofotografía de cielo profundo.', location: 'Cielo Nocturno' }],
            '2025-03-10': [{ title: 'Charla: ¿Estamos solos? La Búsqueda de Exoplanetas', time: '19:00', type: 'charla', description: 'Impartida por la Dra. Estrella Polar.', location: 'Auditorio Principal (y online)' }],
            '2025-03-14': [{ title: 'Eclipse Lunar Parcial', time: 'Aprox. 06:00 UTC', type: 'global', description: 'Eclipse lunar parcial visible en gran parte de América.', location: 'Cielo Nocturno' }, { title: 'Observación del Eclipse Lunar Parcial', time: '02:30 ARG', type: 'observacion', description: 'Evento especial para observar el eclipse. Chequear horarios locales.', location: 'Terraza Observatorio' }],
            '2025-03-20': [{ title: 'Equinoccio de Otoño (HS)', time: 'N/A', type: 'global', description: 'Inicio del otoño en el hemisferio sur.', location: 'N/A' }],
            '2025-03-21': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna de Gusano.', location: 'Terraza Observatorio' }],
            '2025-03-25': [{ title: 'Taller: Procesado de Imágenes Astronómicas', time: '18:00', type: 'taller', description: 'Nivel intermedio. Con Mayra Schwarzschild.', location: 'Aula Digital' }],
            '2025-03-29': [{ title: 'Eclipse Solar Anular (Parcial en Argentina)', time: 'Variable', type: 'global', description: 'Visible como anular en algunas regiones, parcial en Argentina. Consultar horarios y precauciones.', location: 'Cielo Diurno (con protección)' }, { title: 'Observación Segura del Eclipse Solar Parcial', time: 'Mediodía ARG', type: 'observacion', description: 'Observación con filtros solares certificados. AFORO LIMITADO.', location: 'Observatorio (exterior)' }],

            '2025-04-04': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Cielos oscuros ideales.', location: 'Cielo Nocturno' }],
            '2025-04-08': [{ title: 'Observación de Mercurio al Atardecer', time: '18:30', type: 'observacion', description: 'Mejor oportunidad del mes para ver Mercurio.', location: 'Horizonte Oeste' }],
            '2025-04-12': [{ title: 'Charla: La Vía Láctea, Nuestra Galaxia', time: '19:30', type: 'charla', description: 'Un recorrido por la estructura y componentes de nuestra galaxia hogar.', location: 'Auditorio Principal' }],
            '2025-04-19': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna Rosa.', location: 'Terraza Observatorio' }],
            '2025-04-22': [{ title: 'Lluvia de Líridas (Pico)', time: '01:00', type: 'global', description: 'Pico de la lluvia de meteoros Líridas. Mejor después de medianoche.', location: 'Cielo Nocturno' }, { title: 'Noche de Líridas', time: '23:00', type: 'observacion', description: 'Observación guiada de la lluvia de meteoros.', location: 'Campo Abierto Norte' }],
            '2025-04-27': [{ title: 'Inicio Curso: Telescopios Partes y Usos (Módulo 1)', time: '18:00', type: 'curso', description: 'Comienza el popular curso de telescopios.', location: 'Aula Cosmos' }],

            '2025-05-03': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Ideal para fotografía de la Vía Láctea.', location: 'Cielo Nocturno' }],
            '2025-05-06': [{ title: 'Lluvia de Eta Acuáridas (Pico)', time: '03:00', type: 'global', description: 'Restos del Cometa Halley. Mejor visibilidad antes del amanecer.', location: 'Cielo Nocturno' }],
            '2025-05-10': [{ title: 'Día de la Astronomía - Jornada Especial', time: '15:00-23:00', type: 'especial', description: 'Charlas, talleres, observaciones, actividades para niños. ¡Gran evento!', location: 'Todo el Observatorio' }],
            '2025-05-15': [{ title: 'Charla: Agujeros Negros Supermasivos', time: '19:00', type: 'charla', description: 'Con el Dr. Nicolás Balbi. Transmisión online para Premium.', location: 'Auditorio Principal' }],
            '2025-05-18': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna de Flores. Observación especial con música.', location: 'Terraza Observatorio' }],
            '2025-05-24': [{ title: 'Observación de Saturno y sus Anillos', time: '21:00', type: 'observacion', description: 'Excelente oportunidad para ver Saturno en oposición (cercano).', location: 'Plataforma Principal' }],
            '2025-05-29': [{ title: 'Taller Infantil: Cohetes de Agua', time: '16:00', type: 'taller', description: 'Construye y lanza tu propio cohete. Para niños de 6 a 10 años.', location: 'Jardines del Observatorio' }],
            
            '2025-06-02': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Máxima oscuridad.', location: 'Cielo Nocturno' }],
            '2025-06-07': [{ title: 'Charla: Cosmología Moderna - Del Big Bang a la Energía Oscura', time: '19:30', type: 'charla', description: 'A cargo de Bella Vista al Cosmos.', location: 'Auditorio Principal' }],
            '2025-06-14': [{ title: 'Noche de Observación de Cúmulos Globulares', time: '20:30', type: 'observacion', description: 'Explorando Omega Centauri y 47 Tucanae.', location: 'Plataforma Principal' }],
            '2025-06-17': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna de Fresa.', location: 'Terraza Observatorio' }],
            '2025-06-21': [{ title: 'Solsticio de Invierno (HS)', time: 'N/A', type: 'global', description: 'La noche más larga del año. Charla especial sobre el Sol.', location: 'Auditorio / Online' }],
            '2025-06-25': [{ title: 'Webinar Premium: Últimos Descubrimientos del JWST', time: '19:00', type: 'premium', description: 'Análisis de las imágenes y datos más recientes del Telescopio Espacial James Webb.', location: 'Online (Exclusivo Premium)' }],
            '2025-06-29': [{ title: 'Inicio Curso: Astrofotografía Inicial (Módulo 1)', time: '17:00', type: 'curso', description: 'Aprende a capturar el cosmos con Mayra Schwarzschild.', location: 'Aula Cosmos / Online' }],

            '2025-07-01': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Observación de la Vía Láctea en su esplendor.', location: 'Cielo Nocturno' }],
            '2025-07-05': [{ title: 'Aniversario del Observatorio de San Miguel', time: 'Todo el día', type: 'especial', description: 'Actividades especiales, torta y sorpresas.', location: 'Todo el Observatorio' }],
            '2025-07-12': [{ title: 'Charla: Vida en Marte - Mitos y Realidades', time: '19:00', type: 'charla', description: 'Explorando la posibilidad de vida pasada o presente en el planeta rojo.', location: 'Auditorio Principal' }],
            '2025-07-16': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna del Ciervo.', location: 'Terraza Observatorio' }],
            '2025-07-20': [{ title: 'Noche de Observación Familiar: Planetas Gigantes', time: '20:00', type: 'observacion', description: 'Observa Júpiter y Saturno con toda la familia.', location: 'Plataforma Principal' }],
            '2025-07-28': [{ title: 'Lluvia de Delta Acuáridas (Pico)', time: '02:00', type: 'global', description: 'Lluvia de meteoros visible en el hemisferio sur.', location: 'Cielo Nocturno' }],
            '2025-07-31': [{ title: 'Luna Nueva (Azul)', time: 'N/A', type: 'global', description: 'Segunda luna nueva en un mes, cielos oscuros.', location: 'Cielo Nocturno' }],

            '2025-08-05': [{ title: 'Taller de Astrofotografía para Niños (Edición Invierno)', time: '16:00', type: 'taller', description: 'Un taller divertido y educativo para que los más pequeños aprendan a capturar la belleza del cielo.', location: 'Aula Cosmos Kids' }],
            '2025-08-12': [{ title: 'Lluvia de Perseidas (Pico Principal)', time: '23:00-03:00', type: 'global', description: 'La lluvia de meteoros más popular del año. Hasta 100 meteoros/hora.', location: 'Cielo Nocturno' }, { title: 'Gran Noche de Perseidas OSM', time: '22:00', type: 'observacion', description: 'Evento especial para observar las Perseidas. Trae tu reposera.', location: 'Campo Abierto Norte' }],
            '2025-08-13': [{ title: 'Lluvia de Perseidas (Actividad Continua)', time: 'Todo el día', type: 'global', description: 'Continúa la actividad de las Perseidas.', location: 'Cielo Nocturno' }],
            '2025-08-15': [{ title: 'Noche de Observación Lunar (Cuarto Creciente)', time: '20:00', type: 'observacion', description: 'Observa la Luna en su fase creciente con nuestros telescopios profesionales. Ideal para principiantes y familias.', location: 'Terraza Observatorio' }],
            '2025-08-20': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Noche oscura ideal para objetos débiles.', location: 'Cielo Nocturno' }, { title: 'Webinar: Exoplanetas y Vida Alienígena (Repetición)', time: '19:00', type: 'charla', description: 'Únete a nuestra experta Dra. Estrella Polar en un viaje virtual explorando exoplanetas. (Online)', location: 'Online' }],
            '2025-08-22': [{ title: 'Charla: Agujeros Negros y Ondas Gravitacionales', time: '18:30', type: 'charla', description: 'Conferencia magistral sobre los misterios de los agujeros negros con el Dr. Nicolás Balbi.', location: 'Auditorio Principal' }],
            '2025-08-28': [{ title: 'Observación de Saturno y sus Anillos', time: '21:00', type: 'observacion', description: 'Saturno estará en una posición ideal para la observación. Admira sus majestuosos anillos.', location: 'Plataforma Principal' }],
            '2025-08-30': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna Azul (segunda luna llena del mes).', location: 'Terraza Observatorio' }],

            '2025-09-05': [{ title: 'Taller de Introducción a la Radioastronomía (Premium)', time: '18:00', type: 'premium', description: 'Descubre cómo se escucha el universo. Cupos limitados.', location: 'Laboratorio de Radioastronomía' }],
            '2025-09-07': [{ title: 'Eclipse Lunar Total', time: 'Aprox. 18:00-21:00 UTC', type: 'global', description: 'Eclipse lunar total visible en América, Europa y África.', location: 'Cielo Nocturno' }, { title: 'Noche de Eclipse Total de Luna', time: '16:00 ARG', type: 'observacion', description: 'Observación del eclipse desde sus fases iniciales. Evento principal.', location: 'Observatorio y Online' }],
            '2025-09-12': [{ title: 'Lluvia de Perseidas (Pico secundario)', time: '23:00', type: 'observacion', description: 'Observación guiada de la famosa lluvia de meteoros Perseidas. Trae tu saco de dormir y curiosidad!', location: 'Campo Abierto Norte' }],
            '2025-09-18': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Cielos oscuros para observar.', location: 'Cielo Nocturno' }],
            '2025-09-20': [{ title: 'Webinar: Exoplanetas y la Búsqueda de Vida', time: '19:00', type: 'charla', description: 'Con la Dra. Estrella Polar. Exploración de mundos lejanos. (Online)', location: 'Online' }],
            '2025-09-22': [{ title: 'Equinoccio de Primavera (HS)', time: 'N/A', type: 'global', description: 'Inicio de la primavera en el hemisferio sur.', location: 'N/A' }],
            '2025-09-28': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna de Cosecha. Observación especial con telescopios.', location: 'Terraza Observatorio' }, { title: 'Star Party Anual del Observatorio (Día 1)', time: '16:00-24:00', type: 'especial', description: 'Charlas, talleres, música y observación masiva. ¡No te lo pierdas!', location: 'Todo el Observatorio' }],
            '2025-09-29': [{ title: 'Star Party Anual del Observatorio (Día 2)', time: '10:00-18:00', type: 'especial', description: 'Actividades diurnas, observación solar, cierre del evento.', location: 'Todo el Observatorio' }],

            '2025-10-03': [{ title: 'Charla: El lado oscuro del Universo - Materia y Energía Oscura', time: '19:30', type: 'charla', description: 'A cargo de Bella Vista al Cosmos.', location: 'Auditorio Principal' }],
            '2025-10-08': [{ title: 'Lluvia de Dracónidas (Pico)', time: 'Variable', type: 'global', description: 'Puede producir breves ráfagas de meteoros. Mejor al anochecer.', location: 'Cielo Nocturno' }],
            '2025-10-17': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Cielos oscuros.', location: 'Cielo Nocturno' }],
            '2025-10-21': [{ title: 'Lluvia de Oriónidas (Pico)', time: '02:00', type: 'global', description: 'Restos del Cometa Halley. Hasta 20 meteoros/hora.', location: 'Cielo Nocturno' }, { title: 'Noche de Oriónidas', time: '23:00', type: 'observacion', description: 'Observación de la lluvia de meteoros y la constelación de Orión.', location: 'Campo Abierto Norte' }],
            '2025-10-25': [{ title: 'Taller de Cohetería para Aficionados (Nivel 1)', time: '10:00', type: 'taller', description: 'Construye y lanza cohetes de combustible sólido (modelismo).', location: 'Campo de Lanzamiento OSM' }],
            '2025-10-28': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna del Cazador.', location: 'Terraza Observatorio' }],
            
            '2025-11-05': [{ title: 'Lluvia de Táuridas del Sur (Pico)', time: '00:00', type: 'global', description: 'Conocida por sus bólidos brillantes.', location: 'Cielo Nocturno' }],
            '2025-11-08': [{ title: 'Observación de Urano y Neptuno', time: '20:30', type: 'observacion', description: 'Aprovechando su buena posición, intentaremos observar los gigantes helados.', location: 'Plataforma Principal (requiere cielo muy oscuro)' }],
            '2025-11-12': [{ title: 'Lluvia de Táuridas del Norte (Pico)', time: '00:00', type: 'global', description: 'Complementa a las Táuridas del Sur.', location: 'Cielo Nocturno' }],
            '2025-11-15': [{ title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Ideal para objetos de cielo profundo.', location: 'Cielo Nocturno' }],
            '2025-11-17': [{ title: 'Lluvia de Leónidas (Pico)', time: '04:00', type: 'global', description: 'Puede tener tormentas cada ~33 años. Este año actividad normal.', location: 'Cielo Nocturno' }, { title: 'Madrugada de Leónidas', time: '02:00', type: 'observacion', description: 'Observación especial para madrugadores.', location: 'Campo Abierto Norte' }],
            '2025-11-22': [{ title: 'Charla: La Historia de la Astronomía Argentina', time: '18:30', type: 'charla', description: 'Un recorrido por los hitos y personajes de la astronomía en nuestro país.', location: 'Auditorio Principal' }],
            '2025-11-27': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Luna del Castor.', location: 'Terraza Observatorio' }],

            '2025-12-01': [{ title: 'Inicio Curso Avanzado de Cosmología (Premium)', time: '19:00', type: 'premium', description: 'Profundiza en los modelos cosmológicos actuales. Online.', location: 'Online (Exclusivo Premium)' }],
            '2025-12-08': [{ title: 'Marte en Oposición', time: 'N/A', type: 'global', description: 'Marte estará en su punto más cercano y brillante a la Tierra. Excelente para observación.', location: 'Cielo Nocturno' }, { title: 'Noche Especial: Marte en Primer Plano', time: '21:00', type: 'observacion', description: 'Observación detallada de Marte durante su oposición.', location: 'Plataforma Principal' }],
            '2025-12-13': [{ title: 'Lluvia de Gemínidas (Pico)', time: '02:00', type: 'global', description: 'Una de las lluvias más activas y coloridas. Hasta 120 meteoros/hora.', location: 'Cielo Nocturno' }],
            '2025-12-14': [{ title: 'Gran Noche de Gemínidas OSM', time: '22:00', type: 'observacion', description: 'Evento principal para la lluvia de Gemínidas. Chocolate caliente disponible.', location: 'Campo Abierto Norte' }, { title: 'Luna Nueva', time: 'N/A', type: 'global', description: 'Condiciones perfectas para las Gemínidas.', location: 'Cielo Nocturno' }],
            '2025-12-21': [{ title: 'Solsticio de Verano (HS)', time: 'N/A', type: 'global', description: 'El día más largo del año. Observación solar especial (con filtros).', location: 'Observatorio (diurno)' }],
            '2025-12-25': [{ title: 'Navidad Cósmica: Cuentos bajo las Estrellas', time: '20:00', type: 'especial', description: 'Evento familiar con narración de cuentos y observación si el cielo lo permite.', location: 'Jardines del Observatorio' }],
            '2025-12-27': [{ title: 'Luna Llena', time: 'N/A', type: 'global', description: 'Última luna llena del año, Luna Fría.', location: 'Terraza Observatorio' }],
            '2025-12-31': [{ title: 'Despedida del Año Estelar', time: '21:00', type: 'especial', description: 'Última observación del año y brindis. (Requiere reserva)', location: 'Terraza Observatorio' }],
        };


        function renderCalendar(date, filter = 'all') {
            currentMonthYearElem.textContent = date.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' });
            calendarDaysContainer.innerHTML = ''; // Limpiar calendario anterior
            monthlyEventSummaryElem.innerHTML = ''; // Limpiar resumen anterior

            const year = date.getFullYear();
            const month = date.getMonth();

            const firstDayOfMonth = new Date(year, month, 1);
            const lastDayOfMonth = new Date(year, month + 1, 0);
            const daysInMonth = lastDayOfMonth.getDate();
            const startDayOfWeek = firstDayOfMonth.getDay(); // 0 (Dom) - 6 (Sáb)
            
            const today = new Date();
            let monthlyEventsList = [];

            // Celdas vacías para los días antes del inicio del mes
            for (let i = 0; i < startDayOfWeek; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.classList.add('calendar-day-cell', 'day-other-month', 'opacity-50');
                calendarDaysContainer.appendChild(emptyCell);
            }

            // Celdas para cada día del mes
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.classList.add('calendar-day-cell');
                
                const dayNumber = document.createElement('div');
                dayNumber.classList.add('calendar-day-number');
                dayNumber.textContent = day;
                dayCell.appendChild(dayNumber);

                if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                    dayCell.classList.add('day-today');
                }

                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                if (eventsData[dateStr]) {
                    eventsData[dateStr].forEach(event => {
                        if (filter === 'all' || event.type === filter) {
                            const eventElem = document.createElement('div');
                            eventElem.classList.add('calendar-event', `event-type-${event.type}`);
                            eventElem.textContent = event.title;
                            eventElem.dataset.description = event.description;
                            eventElem.dataset.time = event.time;
                            eventElem.dataset.location = event.location;
                            eventElem.dataset.title = event.title;
                            dayCell.appendChild(eventElem);
                            monthlyEventsList.push({ day, ...event });
                        }
                    });
                }
                calendarDaysContainer.appendChild(dayCell);
            }
            
            // Celdas vacías para los días después del fin del mes (para completar la cuadrícula)
            const totalCells = startDayOfWeek + daysInMonth;
            const remainingCells = (7 - (totalCells % 7)) % 7;
            for (let i = 0; i < remainingCells; i++) {
                 const emptyCell = document.createElement('div');
                emptyCell.classList.add('calendar-day-cell', 'day-other-month', 'opacity-50');
                calendarDaysContainer.appendChild(emptyCell);
            }
            
            // Renderizar resumen del mes
            if(monthlyEventsList.length > 0) {
                monthlyEventsList.sort((a,b) => a.day - b.day); // Ordenar por día
                monthlyEventsList.forEach(event => {
                    const summaryItem = document.createElement('div');
                    summaryItem.classList.add('p-4', 'rounded-lg', 'shadow', 'bg-opacity-20', `event-type-${event.type}`);
                    summaryItem.style.backgroundColor = 'rgba(30, 26, 62, 0.6)'; // Default background
                    summaryItem.innerHTML = `
                        <h4 class="font-semibold text-lg text-yellow-400">${String(event.day).padStart(2, '0')}/${String(month + 1).padStart(2, '0')} - ${event.title}</h4>
                        <p class="text-sm text-gray-300"><i class="fas fa-clock mr-2"></i>${event.time}</p>
                        <p class="text-sm text-gray-400"><i class="fas fa-info-circle mr-2"></i>${event.description}</p>
                        ${event.location ? `<p class="text-sm text-gray-400"><i class="fas fa-map-marker-alt mr-2"></i>${event.location}</p>` : ''}
                    `;
                    monthlyEventSummaryElem.appendChild(summaryItem);
                });
            } else {
                monthlyEventSummaryElem.innerHTML = '<p class="text-center text-gray-400">No hay eventos programados para este mes con el filtro actual.</p>';
            }

            // Event listeners para tooltips en eventos del calendario
            document.querySelectorAll('.calendar-event').forEach(elem => {
                elem.addEventListener('mouseenter', (e) => {
                    eventTooltip.innerHTML = `
                        <h4>${e.target.dataset.title}</h4>
                        <p><strong>Hora:</strong> ${e.target.dataset.time}</p>
                        <p><strong>Lugar:</strong> ${e.target.dataset.location || 'N/D'}</p>
                        <p>${e.target.dataset.description}</p>
                    `;
                    eventTooltip.classList.remove('hidden');
                    
                    // Posicionar tooltip
                    const rect = e.target.getBoundingClientRect();
                    let top = rect.bottom + window.scrollY + 5;
                    let left = rect.left + window.scrollX;

                    if (left + eventTooltip.offsetWidth > window.innerWidth - 20) { // 20px padding from edge
                        left = window.innerWidth - eventTooltip.offsetWidth - 20;
                    }
                    if (top + eventTooltip.offsetHeight > window.innerHeight + window.scrollY - 20) {
                        top = rect.top + window.scrollY - eventTooltip.offsetHeight - 5;
                    }
                    eventTooltip.style.top = `${top}px`;
                    eventTooltip.style.left = `${left}px`;
                });
                elem.addEventListener('mouseleave', () => {
                    eventTooltip.classList.add('hidden');
                });
            });
        }

        prevMonthBtn.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar(currentDate, eventFilter.value);
        });

        nextMonthBtn.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar(currentDate, eventFilter.value);
        });

        prevYearBtn.addEventListener('click', () => {
            currentDate.setFullYear(currentDate.getFullYear() - 1);
            renderCalendar(currentDate, eventFilter.value);
        });

        nextYearBtn.addEventListener('click', () => {
            currentDate.setFullYear(currentDate.getFullYear() + 1);
            renderCalendar(currentDate, eventFilter.value);
        });
        
        eventFilter.addEventListener('change', () => {
            renderCalendar(currentDate, eventFilter.value);
        });

        // Renderizar calendario inicial
        renderCalendar(currentDate);

    </script>
</body>
</html>
